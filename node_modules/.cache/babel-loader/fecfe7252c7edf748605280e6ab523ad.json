{"ast":null,"code":"import _defineProperty from\"/Users/guillaumepevrier/Projets/OpenclassRoom/Projet 6 - Cre\\u0301ez une application web de location immobilie\\u0300re avec React/Workflow/ReactProject_shiny/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _taggedTemplateLiteral from\"/Users/guillaumepevrier/Projets/OpenclassRoom/Projet 6 - Cre\\u0301ez une application web de location immobilie\\u0300re avec React/Workflow/ReactProject_shiny/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import{useContext}from'react';import{useParams}from'react-router-dom';import{Link}from'react-router-dom';import styled from'styled-components';import colors from'../../utils/style/colors';import{Loader}from'../../utils/style/Atoms';import{SurveyContext}from'../../utils/context';import{useFetch,useTheme}from'../../utils/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SurveyContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n\"])));var QuestionTitle=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  text-decoration: underline;\\n  text-decoration-color: \",\";\\n  color: \",\";\\n\"])),colors.primary,function(_ref){var theme=_ref.theme;return theme==='light'?'#000000':'#ffffff';});var QuestionContent=styled.span(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin: 30px;\\n  color: \",\";\\n\"])),function(_ref2){var theme=_ref2.theme;return theme==='light'?'#000000':'#ffffff';});var LinkWrapper=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  padding-top: 30px;\\n  & a {\\n    color: \",\";\\n  }\\n  & a:first-of-type {\\n    margin-right: 20px;\\n  }\\n\"])),function(_ref3){var theme=_ref3.theme;return theme==='light'?'#000000':'#ffffff';});var ReplyBox=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  border: none;\\n  height: 100px;\\n  width: 300px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: \",\";\\n  color: \",\";\\n  border-radius: 30px;\\n  cursor: pointer;\\n  box-shadow: \",\";\\n  &:first-child {\\n    margin-right: 15px;\\n  }\\n  &:last-of-type {\\n    margin-left: 15px;\\n  }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme==='light'?colors.backgroundLight:colors.backgroundDark;},function(_ref5){var theme=_ref5.theme;return theme==='light'?'#000000':'#ffffff';},function(props){return props.isSelected?\"0px 0px 0px 2px \".concat(colors.primary,\" inset\"):'none';});var ReplyWrapper=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n\"])));function Survey(){var _useParams=useParams(),questionNumber=_useParams.questionNumber;var questionNumberInt=parseInt(questionNumber);var prevQuestionNumber=questionNumberInt===1?1:questionNumberInt-1;var nextQuestionNumber=questionNumberInt+1;var _useTheme=useTheme(),theme=_useTheme.theme;var _useContext=useContext(SurveyContext),saveAnswers=_useContext.saveAnswers,answers=_useContext.answers;function saveReply(answer){saveAnswers(_defineProperty({},questionNumber,answer));}var _useFetch=useFetch(\"http://localhost:8000/survey\"),data=_useFetch.data,isLoading=_useFetch.isLoading,error=_useFetch.error;var surveyData=data===null||data===void 0?void 0:data.surveyData;if(error){return/*#__PURE__*/_jsx(\"span\",{children:\"Il y a un probl\\xE8me\"});}return/*#__PURE__*/_jsxs(SurveyContainer,{children:[/*#__PURE__*/_jsxs(QuestionTitle,{theme:theme,children:[\"Question \",questionNumber]}),isLoading?/*#__PURE__*/_jsx(Loader,{\"data-testid\":\"loader\"}):/*#__PURE__*/_jsx(QuestionContent,{theme:theme,\"data-testid\":\"question-content\",children:surveyData&&surveyData[questionNumber]}),/*#__PURE__*/_jsxs(ReplyWrapper,{children:[/*#__PURE__*/_jsx(ReplyBox,{onClick:function onClick(){return saveReply(true);},isSelected:answers[questionNumber]===true,theme:theme,children:\"Oui\"}),/*#__PURE__*/_jsx(ReplyBox,{onClick:function onClick(){return saveReply(false);},isSelected:answers[questionNumber]===false,theme:theme,children:\"Non\"})]}),/*#__PURE__*/_jsxs(LinkWrapper,{theme:theme,children:[/*#__PURE__*/_jsx(Link,{to:\"/survey/\".concat(prevQuestionNumber),children:\"Pr\\xE9c\\xE9dent\"}),surveyData&&surveyData[questionNumberInt+1]?/*#__PURE__*/_jsx(Link,{to:\"/survey/\".concat(nextQuestionNumber),children:\"Suivant\"}):/*#__PURE__*/_jsx(Link,{to:\"/results\",children:\"R\\xE9sultats\"})]})]});}export default Survey;","map":{"version":3,"sources":["/Users/guillaumepevrier/Projets/OpenclassRoom/Projet 6 - Créez une application web de location immobilière avec React/Workflow/ReactProject_shiny/src/pages/Survey/index.jsx"],"names":["useContext","useParams","Link","styled","colors","Loader","SurveyContext","useFetch","useTheme","SurveyContainer","div","QuestionTitle","h2","primary","theme","QuestionContent","span","LinkWrapper","ReplyBox","button","backgroundLight","backgroundDark","props","isSelected","ReplyWrapper","Survey","questionNumber","questionNumberInt","parseInt","prevQuestionNumber","nextQuestionNumber","saveAnswers","answers","saveReply","answer","data","isLoading","error","surveyData"],"mappings":"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","sourcesContent":["import { useContext } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport colors from '../../utils/style/colors'\nimport { Loader } from '../../utils/style/Atoms'\nimport { SurveyContext } from '../../utils/context'\nimport { useFetch, useTheme } from '../../utils/hooks'\n\nconst SurveyContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nconst QuestionTitle = styled.h2`\n  text-decoration: underline;\n  text-decoration-color: ${colors.primary};\n  color: ${({ theme }) => (theme === 'light' ? '#000000' : '#ffffff')};\n`\n\nconst QuestionContent = styled.span`\n  margin: 30px;\n  color: ${({ theme }) => (theme === 'light' ? '#000000' : '#ffffff')};\n`\n\nconst LinkWrapper = styled.div`\n  padding-top: 30px;\n  & a {\n    color: ${({ theme }) => (theme === 'light' ? '#000000' : '#ffffff')};\n  }\n  & a:first-of-type {\n    margin-right: 20px;\n  }\n`\n\nconst ReplyBox = styled.button`\n  border: none;\n  height: 100px;\n  width: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${({ theme }) =>\n    theme === 'light' ? colors.backgroundLight : colors.backgroundDark};\n  color: ${({ theme }) => (theme === 'light' ? '#000000' : '#ffffff')};\n  border-radius: 30px;\n  cursor: pointer;\n  box-shadow: ${(props) =>\n    props.isSelected ? `0px 0px 0px 2px ${colors.primary} inset` : 'none'};\n  &:first-child {\n    margin-right: 15px;\n  }\n  &:last-of-type {\n    margin-left: 15px;\n  }\n`\n\nconst ReplyWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nfunction Survey() {\n  const { questionNumber } = useParams()\n  const questionNumberInt = parseInt(questionNumber)\n  const prevQuestionNumber = questionNumberInt === 1 ? 1 : questionNumberInt - 1\n  const nextQuestionNumber = questionNumberInt + 1\n  const { theme } = useTheme()\n\n  const { saveAnswers, answers } = useContext(SurveyContext)\n\n  function saveReply(answer) {\n    saveAnswers({ [questionNumber]: answer })\n  }\n  const { data, isLoading, error } = useFetch(`http://localhost:8000/survey`)\n  const surveyData = data?.surveyData\n\n  if (error) {\n    return <span>Il y a un problème</span>\n  }\n\n  return (\n    <SurveyContainer>\n      <QuestionTitle theme={theme}>Question {questionNumber}</QuestionTitle>\n      {isLoading ? (\n        <Loader data-testid=\"loader\" />\n      ) : (\n        <QuestionContent theme={theme} data-testid=\"question-content\">\n          {surveyData && surveyData[questionNumber]}\n        </QuestionContent>\n      )}\n      <ReplyWrapper>\n        <ReplyBox\n          onClick={() => saveReply(true)}\n          isSelected={answers[questionNumber] === true}\n          theme={theme}\n        >\n          Oui\n        </ReplyBox>\n        <ReplyBox\n          onClick={() => saveReply(false)}\n          isSelected={answers[questionNumber] === false}\n          theme={theme}\n        >\n          Non\n        </ReplyBox>\n      </ReplyWrapper>\n      <LinkWrapper theme={theme}>\n        <Link to={`/survey/${prevQuestionNumber}`}>Précédent</Link>\n        {surveyData && surveyData[questionNumberInt + 1] ? (\n          <Link to={`/survey/${nextQuestionNumber}`}>Suivant</Link>\n        ) : (\n          <Link to=\"/results\">Résultats</Link>\n        )}\n      </LinkWrapper>\n    </SurveyContainer>\n  )\n}\n\nexport default Survey\n"]},"metadata":{},"sourceType":"module"}