{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/guillaumepevrier/Projets/OpenclassRoom/Projet 6 - Cre\\u0301ez une application web de location immobilie\\u0300re avec React/Workflow/ReactProject_shiny/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import{useContext}from'react';import styled from'styled-components';import{SurveyContext}from'../../utils/context';import EmptyList from'../../components/EmptyList';import colors from'../../utils/style/colors';import{useFetch,useTheme}from'../../utils/hooks';import{StyledLink,Loader}from'../../utils/style/Atoms';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResultsContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  margin: 60px 90px;\\n  padding: 30px;\\n  background-color: \",\";\\n\"])),function(_ref){var theme=_ref.theme;return theme==='light'?colors.backgroundLight:colors.backgroundDark;});var ResultsTitle=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  font-weight: bold;\\n  font-size: 28px;\\n  max-width: 60%;\\n  text-align: center;\\n  & > span {\\n    padding-left: 10px;\\n  }\\n\"])),function(_ref2){var theme=_ref2.theme;return theme==='light'?'#000000':'#ffffff';});var DescriptionWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 60px;\\n\"])));var JobTitle=styled.span(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  text-transform: capitalize;\\n\"])),function(_ref3){var theme=_ref3.theme;return theme==='light'?colors.primary:colors.backgroundLight;});var JobDescription=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  & > p {\\n    color: \",\";\\n    margin-block-start: 5px;\\n  }\\n  & > span {\\n    font-size: 20px;\\n  }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme==='light'?colors.secondary:'#ffffff';});var LoaderWrapper=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n\"])));export function formatQueryParams(answers){var answerNumbers=Object.keys(answers);return answerNumbers.reduce(function(previousParams,answerNumber,index){var isFirstParam=index===0;var separator=isFirstParam?'':'&';return\"\".concat(previousParams).concat(separator,\"a\").concat(answerNumber,\"=\").concat(answers[answerNumber]);},'');}export function formatJobList(title,listLength,index){if(index===listLength-1){return title;}else{return\"\".concat(title,\",\");}}function Results(){var _useTheme=useTheme(),theme=_useTheme.theme;var _useContext=useContext(SurveyContext),answers=_useContext.answers;var queryParams=formatQueryParams(answers);var _useFetch=useFetch(\"http://localhost:8000/results?\".concat(queryParams)),data=_useFetch.data,isLoading=_useFetch.isLoading,error=_useFetch.error;if(error){return/*#__PURE__*/_jsx(\"span\",{children:\"Il y a un probl\\xE8me\"});}var resultsData=data===null||data===void 0?void 0:data.resultsData;if((resultsData===null||resultsData===void 0?void 0:resultsData.length)<1){return/*#__PURE__*/_jsx(EmptyList,{theme:theme});}return isLoading?/*#__PURE__*/_jsx(LoaderWrapper,{children:/*#__PURE__*/_jsx(Loader,{\"data-testid\":\"loader\"})}):/*#__PURE__*/_jsxs(ResultsContainer,{theme:theme,children:[/*#__PURE__*/_jsxs(ResultsTitle,{theme:theme,children:[\"Les comp\\xE9tences dont vous avez besoin :\",resultsData&&resultsData.map(function(result,index){return/*#__PURE__*/_jsx(JobTitle,{theme:theme,children:formatJobList(result.title,resultsData.length,index)},\"result-title-\".concat(index,\"-\").concat(result.title));})]}),/*#__PURE__*/_jsx(StyledLink,{$isFullLink:true,to:\"/freelances\",children:\"D\\xE9couvrez nos profils\"}),/*#__PURE__*/_jsx(DescriptionWrapper,{children:resultsData&&resultsData.map(function(result,index){return/*#__PURE__*/_jsxs(JobDescription,{theme:theme,children:[/*#__PURE__*/_jsx(JobTitle,{theme:theme,\"data-testid\":\"job-title\",children:result.title}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"job-description\",children:result.description})]},\"result-detail-\".concat(index,\"-\").concat(result.title));})})]});}export default Results;","map":{"version":3,"sources":["/Users/guillaumepevrier/Projets/OpenclassRoom/Projet 6 - Créez une application web de location immobilière avec React/Workflow/ReactProject_shiny/src/pages/Results/index.jsx"],"names":["useContext","styled","SurveyContext","EmptyList","colors","useFetch","useTheme","StyledLink","Loader","ResultsContainer","div","theme","backgroundLight","backgroundDark","ResultsTitle","h2","DescriptionWrapper","JobTitle","span","primary","JobDescription","secondary","LoaderWrapper","formatQueryParams","answers","answerNumbers","Object","keys","reduce","previousParams","answerNumber","index","isFirstParam","separator","formatJobList","title","listLength","Results","queryParams","data","isLoading","error","resultsData","length","map","result","description"],"mappings":"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","sourcesContent":["import { useContext } from 'react'\nimport styled from 'styled-components'\nimport { SurveyContext } from '../../utils/context'\nimport EmptyList from '../../components/EmptyList'\nimport colors from '../../utils/style/colors'\nimport { useFetch, useTheme } from '../../utils/hooks'\nimport { StyledLink, Loader } from '../../utils/style/Atoms'\n\nconst ResultsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 60px 90px;\n  padding: 30px;\n  background-color: ${({ theme }) =>\n    theme === 'light' ? colors.backgroundLight : colors.backgroundDark};\n`\n\nconst ResultsTitle = styled.h2`\n  color: ${({ theme }) => (theme === 'light' ? '#000000' : '#ffffff')};\n  font-weight: bold;\n  font-size: 28px;\n  max-width: 60%;\n  text-align: center;\n  & > span {\n    padding-left: 10px;\n  }\n`\n\nconst DescriptionWrapper = styled.div`\n  padding: 60px;\n`\n\nconst JobTitle = styled.span`\n  color: ${({ theme }) =>\n    theme === 'light' ? colors.primary : colors.backgroundLight};\n  text-transform: capitalize;\n`\n\nconst JobDescription = styled.div`\n  font-size: 18px;\n  & > p {\n    color: ${({ theme }) => (theme === 'light' ? colors.secondary : '#ffffff')};\n    margin-block-start: 5px;\n  }\n  & > span {\n    font-size: 20px;\n  }\n`\n\nconst LoaderWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`\n\nexport function formatQueryParams(answers) {\n  const answerNumbers = Object.keys(answers)\n\n  return answerNumbers.reduce((previousParams, answerNumber, index) => {\n    const isFirstParam = index === 0\n    const separator = isFirstParam ? '' : '&'\n    return `${previousParams}${separator}a${answerNumber}=${answers[answerNumber]}`\n  }, '')\n}\n\nexport function formatJobList(title, listLength, index) {\n  if (index === listLength - 1) {\n    return title\n  } else {\n    return `${title},`\n  }\n}\n\nfunction Results() {\n  const { theme } = useTheme()\n  const { answers } = useContext(SurveyContext)\n  const queryParams = formatQueryParams(answers)\n\n  const { data, isLoading, error } = useFetch(\n    `http://localhost:8000/results?${queryParams}`\n  )\n\n  if (error) {\n    return <span>Il y a un problème</span>\n  }\n\n  const resultsData = data?.resultsData\n\n  if (resultsData?.length < 1) {\n    return <EmptyList theme={theme} />\n  }\n\n  return isLoading ? (\n    <LoaderWrapper>\n      <Loader data-testid=\"loader\" />\n    </LoaderWrapper>\n  ) : (\n    <ResultsContainer theme={theme}>\n      <ResultsTitle theme={theme}>\n        Les compétences dont vous avez besoin :\n        {resultsData &&\n          resultsData.map((result, index) => (\n            <JobTitle\n              key={`result-title-${index}-${result.title}`}\n              theme={theme}\n            >\n              {formatJobList(result.title, resultsData.length, index)}\n            </JobTitle>\n          ))}\n      </ResultsTitle>\n      <StyledLink $isFullLink to=\"/freelances\">\n        Découvrez nos profils\n      </StyledLink>\n      <DescriptionWrapper>\n        {resultsData &&\n          resultsData.map((result, index) => (\n            <JobDescription\n              theme={theme}\n              key={`result-detail-${index}-${result.title}`}\n            >\n              <JobTitle theme={theme} data-testid=\"job-title\">\n                {result.title}\n              </JobTitle>\n              <p data-testid=\"job-description\">{result.description}</p>\n            </JobDescription>\n          ))}\n      </DescriptionWrapper>\n    </ResultsContainer>\n  )\n}\n\nexport default Results\n"]},"metadata":{},"sourceType":"module"}